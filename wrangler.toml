# Cloudflare Pages configuration
# See: https://developers.cloudflare.com/pages/functions/wrangler-configuration/

name = "unball"
compatibility_date = "2025-11-02"
compatibility_flags = ["nodejs_compat"]

# For local development with Wrangler
# Run: npx wrangler pages dev ./dist

[build]
command = "npm ci --ignore-scripts && npm run build && if [ -f dist/routes.json ]; then mv dist/routes.json dist/_routes.json; fi"

[pages]
pages_build_output_dir = "dist"

# Uncomment and configure KV namespaces if needed
# [[kv_namespaces]]
# binding = "SESSION"
# id = "your_kv_namespace_id"
# preview_id = "your_preview_kv_namespace_id"

[env.production]
# Environment variables for production (set in Cloudflare dashboard or via GitHub secrets)
# SUPABASE_URL
# SUPABASE_KEY
# OPENROUTER_API_KEY
# PUBLIC_MAPBOX_ACCESS_TOKEN
# CRON_SECRET

# Uncomment and configure KV namespaces if needed
# [env.production.kv_namespaces]
# binding = "SESSION"
# id = "your_production_kv_namespace_id"
